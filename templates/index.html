<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No-IP Domain Renewal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="theme-toggle" data-theme="light">
            <button id="theme-toggle">
                <svg class="icon light-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a10 10 0 0 1 0 20 10 10 0 0 1 0-20zm0-2C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22c-5.523 0-10-4.477-10-10S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/></svg>
                <svg class="icon dark-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.35c-5.6 0-10.2-4.6-10.2-10.2S6.4.95 12 .95s10.2 4.6 10.2 10.2-4.6 10.2-10.2 10.2zm0-18.4c-4.5 0-8.2 3.7-8.2 8.2s3.7 8.2 8.2 8.2 8.2-3.7 8.2-8.2-3.7-8.2-8.2-8.2z"/></svg>
            </button>
        </div>

        <h1>No-IP Domain Renewal</h1>

        <form action="{{ url_for('add_account') }}" method="post">
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="type">Type:</label>
                <select id="type" name="type" class="form-control">
                    <option value="domain">Domain</option>
                    <option value="catchall" {% if catchall %}selected{% endif %}>Catch-All</option>
                </select>
            </div>
            <button type="submit" class="btn">Add Account</button>
        </form>

        <h2 class="mt-4">Catch-All Email</h2>
        <div>
            {% if catchall %}
                <p>Email: {{ catchall.email }}</p>
                <form action="{{ url_for('delete_account', email=catchall.email) }}" method="post">
                    <button type="submit" class="btn btn-danger">Remove Catch-All</button>
                </form>
            {% else %}
                <p>No catch-all email set.</p>
            {% endif %}
        </div>

        <h2 class="mt-4">Accounts with Domains</h2>
        <ul class="list-group">
            {% for account in domains %}
            <li class="list-group-item">
                {{ account.email }}
                <form action="{{ url_for('delete_account', email=account.email) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>

        <button id="renew-button" class="btn">Renew All Accounts</button>

        <h2 class="mt-4">Console Output</h2>
        <div id="events" class="console-output"></div>
    </div>

    <!-- Popup -->
    <div id="popup" class="popup">
        Manual renewal starting...
    </div>

    <script src="{{ url_for('static', filename='scripts/main.js') }}"></script>
</body>
</html>
